{"version":3,"file":"index.js","sources":["../src/consts.js","../src/utils.js","../src/dom_syms.js","../src/core.js","../src/state.js","../src/handlrs.js","../src/index.js"],"sourcesContent":["'use strict'\n\nexport const undef = undefined\n\nexport default {\n  undef\n}\n","'use strict'\n\nimport { undef } from './consts'\n\nconst noop = () => undef\nconst pass = (_) => _\n\nexport const is_null = (subj) => subj === null\n\nexport const is_def = (subj) => subj !== undef\n\nexport const is_str = (subj) => typeof subj == 'string'\n\nexport const is_fn = (subj) => typeof subj == 'function'\n\nexport const is_arr = (subj) => subj instanceof Array\n\nexport const is_obj = (subj) =>\n  !is_str(subj) && !is_arr(subj) && !is_fn(subj) && subj instanceof Object\n\nexport const is_sym = (subj) => typeof subj == 'symbol'\n\nexport const trim = (subj = '') => subj.trim && subj.trim()\n\nexport const add = (a, b) => a + b\n\nexport const str = (subj) =>\n  ((is_str(subj) || !is_def(subj)) && add(subj, '')) || JSON.stringify(subj)\n\nexport const repl = (subj, char, with_char = '') =>\n  subj.replace(char, with_char)\n\nexport const sym = (subj) => (is_fn(subj) ? sym(subj.name) : Symbol.for(subj))\n\nexport const sym_to_str = (sym) => Symbol.keyFor(sym)\n\nexport const has_len = (arr) => !!arr.length\n\nexport const is_in = (subj, arr = []) =>\n  reduc(arr, false, (acc, item) => acc || item == subj)\n\nexport const join = (subj = [], joiner = '') =>\n  is_fn(subj.join) && subj.join(joiner)\n\nexport const uniq = (subj) =>\n  reduc(subj, [], (acc, item) => (is_in(item, acc) ? acc : [...acc, item]))\n\nexport const split = (subj = {}, by = '') => is_fn(subj.split) && subj.split(by)\n\nexport const reduc = (\n  [first, ...rest] = [],\n  acc = undef,\n  fn = noop,\n  index_ = 0\n) =>\n  is_def(first) || has_len(rest) ? reduc(rest, fn(acc, first, index_), fn) : acc\n\nexport const flow = (...fns) => (subj) => reduc(fns, subj, (acc, fn) => fn(acc))\n\nexport const to_lower = (subj) => str(subj).toLowerCase()\n\nexport const sanitize = (subj) =>\n  repl(\n    subj,\n    RegExp(`[${join(uniq(split(repl(subj, /[a-z0-9-]/g, ''))))}]`, 'g')\n  )\n\nexport const to_dashed = (subj) => repl(subj, '_', '-')\n\nexport const transform_key = (subj) => flow(to_lower, to_dashed, sanitize)(subj)\n\nexport const add_to = (arr, subj) => [...arr, subj]\n\nexport const keys_of = (subj) => Object.keys(subj)\n\nexport const vals_of = (subj) => Object.values(subj)\n\nexport const syms_of = (subj) => Object.getOwnPropertySymbols(subj)\n\nexport const get = (subj = {}, key) => subj[key]\n\nexport const is_empty = (subj) =>\n  is_null(subj) ||\n  !is_def(subj) ||\n  (is_arr(subj) && !has_len(subj)) ||\n  (is_obj(subj) && !has_len(keys_of(subj)))\n\nexport const compress = (subj = []) =>\n  reduc(\n    subj,\n    [],\n    (acc, item) =>\n      (is_def(item) && !is_null(item) && !is_empty(item) && [...acc, item]) ||\n      acc\n  )\n\nexport const rnd_id = () => {\n  const rnd = Math.random()\n\n  return (rnd * rnd + rnd).toString(16).replace('.', '')\n}\n\nexport default {\n  noop,\n  add,\n  str,\n  sym,\n  sym_to_str,\n  is_def,\n  is_str,\n  is_fn,\n  is_arr,\n  is_obj,\n  is_sym,\n  is_null,\n  has_len,\n  is_in,\n  join,\n  uniq,\n  flow,\n  to_lower,\n  sanitize,\n  to_dashed,\n  transform_key,\n  add_to,\n  reduc,\n  keys_of,\n  vals_of,\n  syms_of,\n  get,\n  repl,\n  trim,\n  compress,\n  is_empty,\n  rnd_id,\n  pass\n}\n","import _ from './utils'\n\nconst tags = [\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'applet',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'base',\n  'basefont',\n  'bdi',\n  'bdo',\n  'bgsound',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'command',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'frame',\n  'frameset',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'iframe',\n  'image',\n  'img',\n  'input',\n  'ins',\n  'isindex',\n  'kbd',\n  'keygen',\n  'label',\n  'legend',\n  'li',\n  'link',\n  'listing',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meta',\n  'meter',\n  'multicol',\n  'nav',\n  'nextid',\n  'nobr',\n  'noembed',\n  'noframes',\n  'noscript',\n  'object',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'param',\n  'picture',\n  'plaintext',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'rtc',\n  'ruby',\n  's',\n  'samp',\n  'script',\n  'section',\n  'select',\n  'shadow',\n  'slot',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'title',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n  'xmp'\n]\n\nconst syms = _.reduc(tags, {}, (acc, tag) => ({\n  ...acc,\n  [tag]: Symbol.for(tag)\n}))\n\nexport default { ...syms }\n\nexport const sc_tags = [\n  syms.area,\n  syms.base,\n  syms.br,\n  syms.col,\n  syms.command,\n  syms.embed,\n  syms.hr,\n  syms.img,\n  syms.input,\n  syms.keygen,\n  syms.link,\n  syms.menuitem,\n  syms.meta,\n  syms.param,\n  syms.source,\n  syms.track,\n  syms.wbr\n]\n","'use strict'\n\nimport undef from './consts'\nimport { sc_tags } from './dom_syms.js'\nimport _ from './utils'\n\nexport const str_style_attr = (val) =>\n  (!_.is_str(val) && val) || _.str(`${val}`)\n\nexport const str_style = (attrs) => {\n  if (!_.is_obj(attrs)) return ''\n\n  return _.trim(\n    _.reduc(\n      _.keys_of(attrs),\n      '',\n      (acc, key) =>\n        `${acc} ${_.transform_key(_.str(key))}: ${str_style_attr(\n          _.get(attrs, key)\n        )};`\n    )\n  )\n}\n\nconst is_style = (key) => key === 'style'\nconst is_value = (key) => key === 'value'\nconst is_handl = (key) => key.match(/^on/)\n\nexport const str_attrs = (attrs, handlrs) => {\n  if (!_.is_obj(attrs)) return ''\n\n  return _.reduc(_.keys_of(attrs), '', (acc, key) => {\n    const trans_key_ = _.transform_key(_.str(key))\n    const trans_key = is_handl(trans_key_)\n      ? handlrs.key(trans_key_)\n      : trans_key_\n    const conc = `${acc} ${trans_key}=`\n\n    const val = _.get(attrs, key)\n\n    if (is_style(trans_key)) return conc + `\"${str_style(val)}\"`\n\n    if (is_handl(trans_key)) return conc + `\"${handlrs.reg(trans_key_, val)}\"`\n\n    if (_.is_null(val)) return acc\n\n    return conc + `\"${_.is_str(val) ? val : _.str(val)}\"`\n  })\n}\n\nexport const str_inner = (jsonml, html_arr = [], handlrs) =>\n  _.reduc(jsonml, html_arr, (acc, inner) => {\n    if (_.is_str(inner)) return [...acc, inner]\n    if (_.is_arr(inner)) return build_html(inner, acc, handlrs)\n\n    return acc\n  })\n\nconst is_sc = (tag) => sc_tags.includes(_.sym(tag))\n\nexport const open_tag = (type, attrs, handlrs) =>\n  `<${_.transform_key(type)}${str_attrs(attrs, handlrs)}${\n    is_sc(type) ? ' /' : ''\n  }>`\n\nexport const close_tag = (type) =>\n  !is_sc(type) ? `</${_.transform_key(type)}>` : ''\n\nexport const wrap_tag = (handlrs, first, second, ...rest) => {\n  const inner = (!_.is_obj(second) && [second]) || []\n  return [\n    open_tag(first, _.is_obj(second) && second, handlrs),\n    ...str_inner([...inner, ...rest], [], handlrs),\n    close_tag(first)\n  ]\n}\n\nexport const build_html = (\n  [first, second, ...rest] = [],\n  html = [],\n  handlrs,\n  nodes\n) => {\n  if (_.is_arr(first))\n    return [...html, ...str_inner([first, second, ...rest], [], handlrs)]\n\n  if (_.is_str(first))\n    return [...html, ...wrap_tag(handlrs, first, second, ...rest)]\n\n  if (_.is_sym(first))\n    return [...html, ...wrap_tag(handlrs, _.sym_to_str(first), second, ...rest)]\n\n  return html\n}\n\nexport const to_html = (jsonml, handlrs) =>\n  _.join(build_html(jsonml, [], handlrs))\n\nexport const to_jsonml = ([first, ...rest] = []) => {\n  if (_.is_str(first) || _.is_sym(first) || _.is_obj(first))\n    return _.compress([first, ...to_jsonml(rest)])\n\n  if (_.is_arr(first)) return _.compress([to_jsonml(first), ...to_jsonml(rest)])\n  if (_.is_fn(first)) return _.compress(to_jsonml(elem(first)(...rest)))\n\n  return []\n}\n\nexport const elem = (fn) => (attrs, ...cont) => {\n  if (_.is_obj(attrs)) return fn(attrs, ...cont)\n\n  return fn({}, attrs, ...cont)\n}\n\nexport const update_build_html = (jsonml = [], node, handlrs) => {\n  let [first, second, ...rest] = jsonml\n\n  if (node.childNodes.length && _.is_arr(first)) {\n    update_nodes(jsonml, node.childNodes, handlrs)\n    return\n  }\n\n  node.innerHTML = to_html(jsonml, handlrs, node)\n}\n\nconst update_text_node = (text, node) =>\n  node.data !== text && (node.data = text)\n\nconst update_node = (elem, node, handlrs) => {\n  if (!elem || !node) return\n\n  const [first, second, ...rest] = elem\n\n  if (is_text(node)) {\n    update_text_node(elem, node)\n    return\n  }\n\n  if (_.is_obj(second)) {\n    const attrs = node.attributes\n    const elem_keys = _.keys_of(second)\n\n    attrs &&\n      _.vals_of(attrs).forEach((attr) => {\n        if (!attr || _.is_def(second[attr])) return\n\n        node[attr] = null\n        node.removeAttribute(attr)\n      })\n\n    elem_keys.forEach((key) => {\n      const val = second[key]\n\n      if (is_style(key)) {\n        if (!val) {\n          node.removeAttribute(key)\n          return\n        }\n\n        _.keys_of(val).forEach((key) => (node.style[key] = val[key]))\n        return\n      }\n\n      if (is_handl(key)) {\n        node.setAttribute(handlrs.key(key), handlrs.reg(key, val))\n        return\n      }\n\n      if (is_value(key)) {\n        val !== node.value && (node.removeAttribute(key), (node.value = val))\n        return\n      }\n\n      if (_.is_def(val)) node.setAttribute(key, val), (node[key] = val)\n      else node.removeAttribute(key)\n    })\n\n    const child_nodes = node.childNodes\n\n    if (!_.is_empty(rest) && _.is_empty(child_nodes)) {\n      update_build_html(rest, node, handlrs)\n      return\n    }\n\n    update_nodes(rest, child_nodes, handlrs)\n    return\n  }\n\n  if (!second) return\n\n  update_nodes([second, ...rest], node.childNodes, handlrs)\n}\n\nconst buffer_node = document.createElement('div')\n\nconst to_nodes = (jsonml, handlrs) => {\n  buffer_node.innerHTML = to_html(jsonml, handlrs)\n\n  return buffer_node.childNodes\n}\n\nconst update_nodes = (\n  [elem, ...rest_elems],\n  [node, ...rest_nodes],\n  handlrs\n) => {\n  if (node && !is_match(elem, node)) {\n    node.parentNode.removeChild(node)\n    update_node([elem, ...rest_elems], rest_nodes, handlrs)\n    return\n  }\n\n  if (!_.is_empty(rest_elems) && _.is_empty(rest_nodes) && node) {\n    to_nodes(rest_elems, handlrs).forEach((new_node) =>\n      node.parentNode.appendChild(new_node)\n    )\n  }\n\n  update_node(elem, node, handlrs)\n\n  if (_.is_empty(rest_elems) && !_.is_empty(rest_nodes)) {\n    rest_nodes.forEach((node) => node.parentNode.removeChild(node))\n  }\n\n  if (_.is_empty(rest_elems)) return\n\n  update_nodes(rest_elems, rest_nodes, handlrs)\n}\n\n// TODO: Is this even correct?\n// const is_coll_match = (jsonml, nodes) => {\n//   if (jsonml.length !== nodes.length) return false\n\n//   return _.reduc(jsonml, true, (verd, elem, index) => {\n//     if (!verd) return verd\n\n//     return is_match(elem, nodes[index])\n//   })\n// }\n\nconst is_text = (node) => node && node.nodeName === '#text'\n\nconst is_match = (elem, node) => {\n  if (!node || !elem) return false\n\n  if (_.is_str(elem) && is_text(node)) return true\n\n  const [first_, second, ...rest] = elem\n  const first = _.is_sym(first_) ? _.sym_to_str(first_) : first_\n\n  return first === node.localName\n}\n\nconst render_ = (handlrs) => (node, app) => {\n  //  const shadow = node.attachShadow({ mode: 'open' })\n  const render = () => (\n    handlrs.detach(),\n    handlrs.reset(),\n    update_build_html([to_jsonml(app)], node, handlrs),\n    handlrs.attach()\n  )\n\n  render()\n\n  return render\n}\n\nexport default render_\n","'use strict'\n\nimport undef from './consts'\nimport _ from './utils'\n\nexport const reducs_sym = _.sym(':reducs')\nexport const on_change_sym = _.sym(':on_change')\nconst _init_state = { [reducs_sym]: {}, [on_change_sym]: [] }\n\nexport const frag = (init_state, ...reducs) => {\n  const reducr_map = _.reduc(reducs, {}, (acc, reducr) => ({\n    ...acc,\n    [_.sym(reducr)]: reducr\n  }))\n\n  return (state = init_state, reducr, ...args) => {\n    const fn = reducr_map[_.sym(reducr)]\n\n    if ((!_.is_fn(reducr) && _.is_def(state)) || !_.is_fn(fn)) return state\n\n    return reducr_map[_.sym(reducr)](state, ...args)\n  }\n}\n\nconst add = (state = _init_state, init_frag, ...reducers) => {\n  const sym = _.sym(init_frag)\n  const reducr = frag(init_frag(), ...reducers)\n\n  return {\n    ...state,\n    [sym]: reducr(),\n    [reducs_sym]: { ...state[reducs_sym], [sym]: reducr }\n  }\n}\n\nconst conn = (state, elem = _.noop, ...frags) => (...args) =>\n  elem.apply(null, [\n    _.reduc(frags, {}, (frag_state, { name }) => ({\n      ...frag_state,\n      [name]: state()[_.sym(name)]\n    })),\n    args\n  ])\n\nconst disp = (state, reducr, ...args) => {\n  const reducs = state[reducs_sym]\n\n  return _.reduc(_.syms_of(reducs), state, (acc, frag_name) => ({\n    ...acc,\n    [frag_name]: reducs[frag_name](state[frag_name], reducr, ...args)\n  }))\n}\n\nconst call_on_change = (cbs) => () => _.reduc(cbs, null, (_, cb) => cb())\n\nconst get_state = (state) =>\n  _.reduc(_.syms_of(state), {}, (acc, key) => {\n    if (key == reducs_sym || key == on_change_sym) return acc\n\n    return {\n      ...acc,\n      [_.sym_to_str(key)]: state[key]\n    }\n  })\n\nconst state = (state_) => {\n  state_ = { ...state_, ..._init_state }\n\n  const get = () => ({ ...state_ })\n  const set = (new_state) => ((state_ = new_state), undef)\n\n  return {\n    add: (init_frag, ...reducrs) => set(add(get(), init_frag, ...reducrs)),\n    conn: (elem, ...frags) => conn(get, elem, ...frags),\n    disp: (reducr, ...args) => (\n      set(disp(get(), reducr, ...args)),\n      setTimeout(call_on_change(get()[on_change_sym]))\n    ),\n    on_change: (fn) =>\n      set({ ...get(), [on_change_sym]: [...get()[on_change_sym], fn] }),\n\n    get: () => get_state(get())\n  }\n}\n\nexport default state\n","'use strict'\n\nimport { rnd_id, keys_of, reduc, repl, split } from './utils'\n\nconst reg = (store, handlr, handlr_key) => {\n  const handlr_id = rnd_id()\n\n  const new_store = {\n    ...store,\n    [handlr_key + '-' + handlr_id]: handlr\n  }\n  return [handlr_id, new_store]\n}\n\nconst key = (val) => val + '-key'\n\nconst detach = (event, handlr_id, handlr) => {\n  const node = document.querySelector(`[${key(event)}=\"${handlr_id}\"]`)\n  const ev_name = repl(event, /^on/, '')\n\n  return node.removeEventListener(ev_name, handlr)\n}\n\nconst attach = (event, handlr_id, handlr) => {\n  const node = document.querySelector(`[${key(event)}=\"${handlr_id}\"]`)\n  const ev_name = repl(event, /^on/, '')\n\n  return node.addEventListener(ev_name, handlr)\n}\n\nconst handlrs = (store_) => {\n  store_ = {}\n\n  return {\n    get: () => store_,\n    reset: () => (store_ = {}),\n    key: (val) => key(val),\n    detach: () =>\n      reduc(keys_of(store_), null, (_, key) => {\n        const [handlr_key, handlr_id] = split(key, '-')\n        const handlr = store_[key]\n\n        detach(handlr_key, handlr_id, handlr)\n      }),\n    attach: () =>\n      reduc(keys_of(store_), null, (_, key) => {\n        const [handlr_key, handlr_id] = split(key, '-')\n        const handlr = store_[key]\n\n        attach(handlr_key, handlr_id, handlr)\n      }),\n    reg: (event, handlr) => {\n      const [handlr_id, new_store] = reg(store_, handlr, event)\n      store_ = new_store\n\n      return handlr_id\n    }\n  }\n}\n\nexport default handlrs\n","'use strict'\n\nimport consts from './consts'\nimport dom from './dom_syms'\nimport render_ from './core'\nimport utils from './utils'\nimport state from './state'\nimport handlrs_ from './handlrs'\n\nconst handlrs = handlrs_()\nconst render = render_(handlrs)\n\nexport default {\n  consts,\n  dom,\n  render,\n  handlrs,\n  utils,\n  state\n}\n"],"names":["undef","undefined","noop","pass","_","is_null","subj","is_def","is_str","is_fn","is_arr","Array","is_obj","Object","is_sym","trim","add","a","b","str","JSON","stringify","repl","char","with_char","replace","sym","name","Symbol","for","sym_to_str","keyFor","has_len","arr","length","is_in","reduc","acc","item","join","joiner","uniq","split","by","first","rest","fn","index_","flow","fns","to_lower","toLowerCase","sanitize","RegExp","to_dashed","transform_key","add_to","keys_of","keys","vals_of","values","syms_of","getOwnPropertySymbols","get","key","is_empty","compress","rnd_id","rnd","Math","random","toString","tags","syms","tag","sc_tags","area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","str_style_attr","val","str_style","attrs","is_style","is_value","is_handl","match","str_attrs","handlrs","trans_key_","trans_key","conc","reg","str_inner","jsonml","html_arr","inner","build_html","is_sc","includes","open_tag","type","close_tag","wrap_tag","second","html","nodes","to_html","to_jsonml","elem","cont","update_build_html","node","childNodes","update_nodes","innerHTML","update_text_node","text","data","update_node","is_text","attributes","elem_keys","forEach","attr","removeAttribute","style","setAttribute","value","child_nodes","buffer_node","document","createElement","to_nodes","rest_elems","rest_nodes","is_match","parentNode","removeChild","new_node","appendChild","nodeName","first_","localName","render_","app","render","detach","reset","attach","reducs_sym","on_change_sym","_init_state","frag","init_state","reducs","reducr_map","reducr","state","args","init_frag","reducers","conn","frags","apply","frag_state","disp","frag_name","call_on_change","cbs","cb","get_state","state_","set","new_state","reducrs","setTimeout","on_change","store","handlr","handlr_key","handlr_id","new_store","event","querySelector","ev_name","removeEventListener","addEventListener","store_","handlrs_","consts","dom","utils"],"mappings":"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"}